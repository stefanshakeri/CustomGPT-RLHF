# Vectorization Method

## Functionality

### Input Dataset
The CSV dataset used, contained in the ```data``` folder, contains four features: 
1. ```question```: the question the LLM is being asked
2. ```llm_response_1```: the first response generated by the LLM
3. ```llm_response_2```: the second response generated by the LLM
4. ```expert_response```: the response supplied by some expert opinion

### Expert Response Vectorization
The expert responses will be static throughout testing, so they will be vectorized and uploaded to a Chroma vector database separately. Once they are vectorized, they can be compared through cosine similarity to the LLM responses to evalute their effectiveness. 

### LLM Response Vectorization
The two LLM responses will be vectored so that they can be compared to the expert responses through cosine similarity to evaluate the similarity of the responses. 

### Responses Comparison
The LLM responses and expert responses will be compared through cosine similarity to evaluate the strength of the LLM responses to determine which one was superior. A score will then be applied to each LLM response and outputted in a CSV. 

## Usage

### Environment Variables
Create a ```.env``` file with the following variables:
```
OPENAI_API_KEY='[your OpenAI API key]'
INPUT_FILE='[the name of your input CSV file, including the ".csv" portion]'
CHROMA_PATH='[the path name of where you want to store your local Chroma database]'
OUTPUT_FILE='[the name of your output CSV file, including the ".csv" portion]'
```

### Input CSV File
Create a CSV file in the ```data``` directory with the schema specified above. 

### Create Chroma Database
To create the Chroma vector database, starting off with the expert responses, run
```
python create_database.py
```
Re-run that line to recreate the database with a fresh set of expert responses when necessary. 

### Add LLM Responses
To add the LLM responses to the Chroma vector database, run
```
python add_llm_responses.py
```

### Compare Responses
To compare the LLM responses with the expert responses through cosine similiarity, run
```
python compare_responses.py
```
The expert response and corresponding LLM responses, along with their similarity scores, will be outputted to your specified CSV file in the ```data``` directory. 